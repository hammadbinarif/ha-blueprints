blueprint:
  name: Doorbell Gemini Notification
  description: |
    Sends a rich notification with the Gemini-generated description and image.
    Designed to be called by other automations, passing 'description' and 'image_path' variables.
  domain: script
  author: Hammad Arif
  input:
    notify_service:
      name: Notification Service
      description: The `notify.` service to send the message to (e.g., `notify.mobile_app_your_phone`, `notify.phones_group`).
      default: notify.notify
      selector:
        text:

    notification_title:
      name: Notification Title
      description: Title of the notification.
      default: "Doorbell Camera Event"
      selector:
        text:

variables:
  image_url: "{{ image_path | replace('/config/www', '/local') }}"

sequence:
  - service: !input notify_service
    data:
      title: !input notification_title
      message: "{{ description }}"
      data:
        image: "{{ image_url }}"
